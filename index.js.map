{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const requestFetch = async (inputValueRequest, page, perPage) => {\n  const params = new URLSearchParams({\n    per_page: perPage,\n    page,\n    safesearch: 'true',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    key: '45720835-cd950b20c56733b9244c71a24',\n    q: inputValueRequest,\n  });\n  const response = await axios.get(`https://pixabay.com/api/?${params}`);\n\n  return response.data;\n};\n","export const createGallery = imgInfo => {\n  return `<li class=\"gallery-item\">\n  <a class=\"img-link\" href=\"${imgInfo.largeImageURL}\">\n  <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" width=\"360\" height=\"200\"/>\n  </a>\n  <div class=\"inf-box\">\n  <b class=\"img-prop\">Likes: <span class=\"img-prop-value\">${imgInfo.likes}</span></b>\n  <b class=\"img-prop\">Views: <span class=\"img-prop-value\">${imgInfo.views}</span></b>\n  <b class=\"img-prop\">Comments: <span class=\"img-prop-value\">${imgInfo.comments}</span></b>\n  <b class=\"img-prop\">Downloads: <span class=\"img-prop-value\">${imgInfo.downloads}</span></b>\n  </div>\n  </li>`;\n};\n\nexport const addElToHTML = (gallery, galleryList) => {\n  galleryList.innerHTML = gallery;\n};\nexport const cleanElHTML = galleryList => {\n  galleryList.innerHTML = '';\n};\n","import iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst lightbox = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\nimport { requestFetch } from './js/pixabay-api';\nimport { createGallery, addElToHTML, cleanElHTML } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst galleryList = document.querySelector('.gallery');\nconst loaderSpan = document.querySelector('#load-more-loader-top');\nconst btn = document.querySelector('#button-load-more');\nconst loaderMoreSpan = document.querySelector('#load-more-loader');\nconst galleryListItem = document.querySelector('.gallery-item');\n\nlet page = 1;\nlet perPage = 15;\nlet inputValue = '';\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n\n  inputValue = form.elements.user_query.value.trim();\n\n  cleanElHTML(galleryList);\n  loaderSpan.classList.add('loader');\n\n  const asyncTryCatch = async () => {\n    try {\n      const inf = await requestFetch(inputValue, page, perPage);\n      if (inf.total === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        btn.classList.add('button-load-more');\n      }\n      const gallery = inf.hits\n        .map(imgInform => createGallery(imgInform))\n        .join('');\n\n      addElToHTML(gallery, galleryList);\n\n      lightbox.refresh();\n      loaderSpan.classList.remove('loader');\n    } catch (error) {\n      iziToast.error({\n        message: `Oops! Something went wrong. Erorr: ${error}`,\n      });\n    }\n  };\n  asyncTryCatch();\n  btn.classList.add('button-load-more');\n  loaderMoreSpan.classList.remove('loader');\n  const heightItem = galleryListItem.getBoundingClientRect();\n  scrollBy({\n    top: heightItem.height * 2,\n    behavior: 'smooth',\n  });\n});\n\nbtn.addEventListener('click', async () => {\n  btn.classList.remove('button-load-more');\n\n  if (inputValue === '') {\n    iziToast.error({\n      message: 'Please enter a subject for the photo',\n    });\n    return;\n  }\n\n  loaderMoreSpan.classList.add('loader');\n  inputValue = form.elements.user_query.value.trim();\n\n  try {\n    page += 1;\n    const inf = await requestFetch(inputValue, page, perPage);\n\n    const gallery = inf.hits\n      .map(imgInform => createGallery(imgInform))\n      .join('');\n\n    const totalPages = Math.ceil(inf.total / perPage);\n    if (page > totalPages) {\n      loaderMoreSpan.classList.remove('loader');\n\n      return iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    galleryList.insertAdjacentHTML('beforeend', gallery);\n    loaderMoreSpan.classList.remove('loader');\n\n    lightbox.refresh();\n  } catch (error) {\n    iziToast.error({\n      message: `Oops! Something went wrong. Erorr: ${error}`,\n    });\n  }\n\n  btn.classList.add('button-load-more');\n});\n"],"names":["requestFetch","inputValueRequest","page","perPage","params","axios","createGallery","imgInfo","addElToHTML","gallery","galleryList","cleanElHTML","lightbox","SimpleLightbox","form","loaderSpan","btn","loaderMoreSpan","galleryListItem","inputValue","event","inf","iziToast","imgInform","error","heightItem","totalPages"],"mappings":"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"}